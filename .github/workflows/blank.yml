# 工作流名称
name: Build ZMK User Config

# 触发条件：手动触发 + 代码推送/PR 到 main 分支
on:
  workflow_dispatch:
  push:
    branches: [main]
  pull_request:
    branches: [main]

# 工作流任务
jobs:
  build:
    # 运行环境
    runs-on: ubuntu-latest
    # 调用外部工作流
    steps:
      - name: 调用 ZMK 官方构建工作流
        uses: zmkfirmware/zmk/.github/workflows/build-user-config.yml@main  # 核心修正：mian → main
        # 传递必要的参数（根据 ZMK 需求可调整）
        with:
          config-file: config/DecaDeca_Split.conf  # 替换为你的实际配置文件路径
          board: nice_nano_v2                   # 替换为你的键盘主板型号
        # 授权（必填，确保有足够权限调用外部工作流）
        secrets:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
